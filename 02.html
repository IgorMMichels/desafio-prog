<meta charset="UTF-8" />
<script>
  let alunos = ["João", "Maria", "Pedro", "Ana", "Carlos"];
  let notas = [];
  let mediaNotas = [];
  let desempenho = [];

  function cadastraNota() {
    for (aluno of alunos) {
      let notasAlunoSeparado = [];
      for (let i = 1; i <= 4; i++) {
        let notaAluno;
        notaAluno = Number(prompt(`Adicione a ${i}ª nota do(a) ${aluno}.`));

        while (
          notaAluno == `` ||
          notaAluno == null ||
          isNaN(notaAluno) ||
          notaAluno < 0 ||
          notaAluno > 10
        ) {
          notaAluno = Number(prompt(`Adicione a ${i}ª nota do(a) ${aluno}.`));
        }

        notasAlunoSeparado.push(notaAluno);
      }
      notas.push(notasAlunoSeparado);
  }
    return `Todas as notas foram cadastradas com sucesso!`
  }

  function calculaNota() {
    for (let i = 0; i < alunos.length; i++) {
      let somaNota = 0;
      let mediaNota;
      for (nota of notas[i]) {
        somaNota += nota;
      }
      mediaNota = somaNota / 4;

      mediaNotas.push(mediaNota);

      if (mediaNota < 5) {
        desempenho.push(`Insuficiente`);
      } else if (mediaNota < 7) {
        desempenho.push(`Regular`);
      } else if (mediaNota < 9) {
        desempenho.push(`Bom`);
      } else if (mediaNota <= 10) {
        desempenho.push(`Excelente`);
      }
    }
  }

  function removeAluno() {
    let alunoR = prompt(
      `Informe o nome do aluno, opcões: \n${alunos.join("\n")}`
    )
      .toLowerCase()
      .trim();

    while (alunoR == "") {
      let alunoR = prompt(
        `Informe o nome do aluno, opcões: \n${alunos.join("\n")}`
      )
        .toLowerCase()
        .trim();
    }

    alunoR = alunoR[0].toUpperCase() + alunoR.slice(1);
    while (
      alunos.indexOf(alunoR) === -1 ||
      alunoR.length === 0 ||
      alunoR == ""
    ) {
      prompt(`${alunoR} não foi encontrado(a).`);
      alunoR = prompt(
        `** Informe o nome do aluno, opcões: \n${alunos.join("\n")}`
      )
        .toLowerCase()
        .trim();
      alunoR = alunoR[0].toUpperCase() + alunoR.slice(1);
    }
    let remove = alunos.indexOf(alunoR);
    notas.splice(remove, 1);
    desempenho.splice(remove, 1);
    mediaNotas.splice(remove, 1);
    alunos.splice(remove, 1);

    return `${alunoR} foi removido(a) da lista de alunos.`;
  }

  function geraRelatorio() {
    let relatorio = "=== DESEMPENHO DOS ALUNOS ===\n";

    for (let i = 0; i < alunos.length; i++) {
      relatorio += `Aluno: ${alunos[i]} - Notas: ${notas[i].join(
        ", "
      )} - Média: ${mediaNotas[i]} - Desempenho: ${desempenho[i]}. \n`;
    }

    return relatorio;
  }

  alert(cadastraNota());
  calculaNota();

  let opcao = 1;
  while (opcao > 0) {
    opcao = parseInt(
      prompt(
        "=== GERENCIADOR DE NOTAS ===\n" +
          "1. Vizualizar Relatórios\n" +
          "2. Remover Aluno\n" +
          "0. Sair\n\n" +
          "Escolha uma opção:"
      )
    );
    switch (opcao) {
      case 1:
        alert(geraRelatorio());
        break;
      case 2:
        alert(removeAluno());
        break;
      case 0:
        alert("Saindo...");
        break;
      default:
        alert("Opção inválida!");
    }
  }
</script>
